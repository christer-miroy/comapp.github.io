<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Communications Application</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="/stylesheets/user-list-style.css" rel="stylesheet">
</head>

<body>
  <div class="tabsContainer m-2">
    <!-- Tabs -->
    <div class="navbar">
      <div class="navTab col-3">
        <a href="#" class="navLink d-flex justify-content-center" id="chat">Group Chat</a>
      </div>
      <div class="navTab col-3">
        <a href="#" aria-current="page" class="navLink active d-flex justify-content-center" id="user-list">Manage
          Users</a>
      </div>
      <div class="navTab col-3">
        <a href="#" class="navLink d-flex justify-content-center" id="docs-list">Manage Documents</a>
      </div>
      <div class="navTab col-3">
        <a href="#" class="navLink d-flex justify-content-center" id="logout">Logout</a>
      </div>
    </div>
  </div>
  <div class="userListContainer m-2">
    <!-- User List content -->
    <div class="d-flex justify-content-start mt-4">
      <!-- heading -->
      <h3><b>Users</b></h3>
    </div>
    <!-- User Table-->
    <div class="userTable mt-4">
      <table class="users" id="users">
        <!-- table headers -->
        <tr class="tr">
          <th class="colName">Name</th>
          <th class="colEmail">User Email ID</th>
          <th class="colAction" colspan="2"> </th>
        </tr>
        <!-- dynamic display of users -->
        <% users.forEach(user => { %>
          <tr>
            <td><%= user.fullName %></td>
            <td><%= user.email %></td>
            <td><a href="/edit-user/<%= user._id %>">Edit</a></td>
            <td><% if(user._id != id){%> <a class="delete" id="<%= user._id %>" id="deleteModal" href="#" data-bs-target="#deleteModal"
              data-bs-toggle="modal">Delete</a></td><% } %></td>
          </tr>
        <% }) %>
        <!-- table body -->
      </table>
    </div>
  </div>
  <!-- Delete Modal -->
  <div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true" data-bs-backdrop="static">
    <div class="modal-dialog modal-sm modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header text-center">
          <div class="modal-title w-100" id="modalLabel">Confirm User Deletion</div>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          Are you sure?
        </div>
        <div class="modal-footer">
          <form id="deleteOkayBtn">
            <button type="submit" class="okayBtn btn btn-outline-dark" data-bs-dismiss="modal" >Okay</button>
          </form>
          <button type="submit" class="cancelBtn btn btn-outline-dark" data-bs-dismiss="modal" id="deleteCancelBtn">Cancel</button>
        </div>
      </div>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script type="text/javascript" src="/javascripts/user-list.js"></script>
  <script type="text/javascript" src="/javascripts/nav.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>