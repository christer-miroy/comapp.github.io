<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chat - Communications Application</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="/stylesheets/chat-style.css" rel="stylesheet">

</head>

<body>
  <div class="tabsContainer m-2">
    <!-- Tabs -->
    <div class="navbar">
      <div class="navTab col-3">
        <a href="#" aria-current="page" class="navLink active d-flex justify-content-center" id="chat">Group Chat</a>
      </div>
      <div class="navTab col-3">
        <a href="#" class="navLink d-flex justify-content-center" id="user-list">Manage
          Users</a>
      </div>
      <div class="navTab col-3">
        <a href="#" class="navLink d-flex justify-content-center" id="docs-list">Manage Documents</a>
      </div>
      <div class="navTab col-3">
        <a href="#" class="navLink d-flex justify-content-center" id="logout">Logout</a>
      </div>
    </div>
  </div>
  <div class="chatContainer m-2">
    <!-- Group Chat -->
    <div class="chat mt-4">
      <!-- Heading -->
      <div class="chatHead d-flex">
        <div class="chatTitle p-2 flex-grow-1">Group Chat</div>
      </div>
      <!-- Main Chat Panel-->
      <div class="chatMain" id="chatMain">
        <div class="m-2" id="chatMessage" name="chatMessage">
          <% chats.forEach(chat => { %>
            <% const date = new Date(chat.dateSent) %>
            <p>[<%= `${date.getFullYear()}-${date.getMonth() + 1}-${date.getDate()} ${date.getHours() -12}:${date.getMinutes()}:${date.getSeconds()}`  %>] <%= chat.sender %>:</p> <p><%= chat.message %></p>
          <% }) %> 
        </div>
      </div>
      <!-- Send Message -->
      <div class="chatSender m-3">
        <form class="d-flex flex-row" id="sendMessage" method="post" action="/chat">
          <div class="sender col-3 m-3" id="userEmail" name="userEmail"><%= fullName%></div>
          <div class="message col-5 m-3">
            <input type="text" class="form-control" id="typeMessage" name="typeMessage">
          </div>
          <div class="buttons col-4 m-3">
            <button type="submit" class="btn btn-outline-dark btn-sm" id="sendBtn">Send</button>
            <button type="button" class="btn btn-outline-dark btn-sm" id="refreshBtn">Refresh</button>
          </div>
        </form>
      </div>
    </div>
  </div>
  <script src="/socket.io/socket.io.js"></script>
  <script type="text/javascript" src="/javascripts/chat.js"></script>
  <script type="text/javascript" src="/javascripts/nav.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>